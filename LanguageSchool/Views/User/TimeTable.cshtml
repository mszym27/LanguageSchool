@using System;
@using System.Collections.Generic;
@using System.Data;
@using System.Data.Entity;
@using System.Linq;
@using System.Net;
@using System.Web;
@using System.Web.Mvc;
@using LanguageSchool.Models;
@using LanguageSchool.Models.ViewModels;

@model List<GroupTime>

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="row thumbnail col-md-12">
    <div class="btn-group-toggle" data-toggle="buttons">
        <table class="table table-bordered">
            <tr>
                <th class="text-center">
                </th>
                <th class="text-center">
                    Poniedziałek
                </th>
                <th class="text-center">
                    Wtorek
                </th>
                <th class="text-center">
                    Środa
                </th>
                <th class="text-center">
                    Czwartek
                </th>
                <th class="text-center">
                    Piątek
                </th>
                <th class="text-center">
                    Sobota
                </th>
                <th class="text-center">
                    Niedziela
                </th>
            </tr>

        @for (int i = 0; i < 12; i++)
        {
            var currentHour = i + 8 + ".15";
            var nextHour = (i + 8 + 1) + ".15";
            <tr>
                <td>@currentHour - @nextHour</td>
                @for (int j = 0; j < 7; j++)
                {
                    GroupTime current = Model.Where(gt => (gt.DayOfWeekId == (j + 1)) && !(gt.EndTime < i + 8) && !(gt.StartTime > i + 8)).FirstOrDefault();
                    if (current == null)
                    {
                        <td></td>
                    }
                    else
                    {
                        <td>
                            @current.Group.Course.Name + " (" + current.Group.Name + ")"
                        </td>
                    }
                }
            </tr>
        }
        </table>
    </div>
</div>

<style type="text/css">
    td {
        width: 100px;
    }

    th {
        width: 100px;
    }
</style>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}