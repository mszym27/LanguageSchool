@using PagedList.Mvc;
@model PagedList.IPagedList<LanguageSchool.Models.ViewModels.MessageViewModels.UserMessageShortDetailsVM>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <div class="row">
        <div class="bordered col-md-12">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>
                        @Html.ActionLink("Data wysłania", "Index", new { sortColumn = "SentDate", sortDirection = ViewBag.sortDirection, page = 1 },
                         new { style = "text-decoration:none; color:black" })
                    </th>
                    <th>
                        @Html.ActionLink("Data odczytania", "Index", new { sortColumn = "ReceivedDate", sortDirection = ViewBag.sortDirection, page = 1 },
                         new { style = "text-decoration:none; color:black" })
                    </th>
                    <th>
                        @Html.ActionLink("Tytuł", "Index", new { sortColumn = "Topic", sortDirection = ViewBag.sortDirection, page = 1 },
                         new { style = "text-decoration:none; color:black" })
                    </th>
                    <th>
                        Treść
                    </th>
                </tr>

                @foreach (var item in Model)
                {
                    var style = "";

                    if (item.IsSystem)
                    {
                        style += "color:Red;";
                    }

                    if (!item.HasBeenReceived)
                    {
                        style += "font-weight:bold";
                    }

                    <tr style="@style">
                        <td>
                            @Html.DisplayFor(modelItem => item.SentDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ReceivedDate)
                        </td>
                        <td>
                            @Html.ActionLink(item.Topic, "Details", new { userMessageId = item.UserMessageId })
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ShortenedContents)
                        </td>
                    </tr>
                }

            </table>
        </div>

        <p />

        <div class="col-md-12" align="center">
            @Html.PagedListPager(Model, page => Url.Action("Index",
            new { sortColumn = ViewBag.sortColumn, sortDirection = ViewBag.sortDirection, page }))
        </div>
    </div>
</div>
